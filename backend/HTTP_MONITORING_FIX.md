# Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð° HTTP ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð²

## ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°

Ð¡ÐµÑ€Ð²ÐµÑ€Ñ‹ Ñ Ñ‚Ð¸Ð¿Ð¾Ð¼ "Ð”Ñ€ÑƒÐ³Ð¾Ðµ" Ð¸ URL `https://google.com/` Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°Ð»Ð¸ ÑÑ‚Ð°Ñ‚ÑƒÑ "Ð¾Ñ„Ñ„Ð»Ð°Ð¹Ð½", Ñ…Ð¾Ñ‚Ñ ÑÐ°Ð¹Ñ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½.

## ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ñ‹ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹

1. **ÐžÑ‚ÑÑƒÑ‚ÑÑ‚Ð²Ð¸Ðµ User-Agent**: ÐœÐ½Ð¾Ð³Ð¸Ðµ ÑÐ°Ð¹Ñ‚Ñ‹ (Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ Google) Ð±Ð»Ð¾ÐºÐ¸Ñ€ÑƒÑŽÑ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð±ÐµÐ· Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð³Ð¾ User-Agent
2. **ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ñ€ÐµÐ´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ð²**: Google.com Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ 301 Ñ€ÐµÐ´Ð¸Ñ€ÐµÐºÑ‚, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð½Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ð»ÑÑ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾
3. **ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾Ðµ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ**: Ð¡Ð»Ð¾Ð¶Ð½Ð¾ Ð±Ñ‹Ð»Ð¾ Ð¿Ð¾Ð½ÑÑ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð¸ÑÑ…Ð¾Ð´Ð¸Ñ‚ Ð¿Ñ€Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐµ

## Ð ÐµÑˆÐµÐ½Ð¸Ðµ

### 1. Ð£Ð»ÑƒÑ‡ÑˆÐµÐ½Ð½Ñ‹Ðµ HTTP Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¸

Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ñ‹ Ñ€ÐµÐ°Ð»Ð¸ÑÑ‚Ð¸Ñ‡Ð½Ñ‹Ðµ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¸ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð°:

```java
.defaultHeader("User-Agent", "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36")
.defaultHeader("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8")
.defaultHeader("Accept-Language", "en-US,en;q=0.5")
.defaultHeader("Accept-Encoding", "gzip, deflate")
.defaultHeader("Connection", "keep-alive")
.defaultHeader("Upgrade-Insecure-Requests", "1")
```

### 2. ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ñ€ÐµÐ´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ð²

Ð¢ÐµÐ¿ÐµÑ€ÑŒ ÑÑ‡Ð¸Ñ‚Ð°ÑŽÑ‚ÑÑ ÑƒÑÐ¿ÐµÑˆÐ½Ñ‹Ð¼Ð¸ ÐºÐ°Ðº 2xx, Ñ‚Ð°Ðº Ð¸ 3xx Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹:

```java
boolean isSuccessful = response.getStatusCode().is2xxSuccessful() || 
                     (response.getStatusCode().value() >= 300 && response.getStatusCode().value() < 400);
```

### 3. Ð£Ð»ÑƒÑ‡ÑˆÐµÐ½Ð½Ð¾Ðµ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¾ Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸:

```java
logger.debug("Checking HTTP endpoint: {} for server: {}", checkUrl, server.getName());
logger.debug("HTTP response for {}: {} - {}", checkUrl, response.getStatusCode(), isSuccessful ? "SUCCESS" : "FAILED");
```

### 4. ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ

Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð´Ð»Ñ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°:

```properties
logging.level.com.dashboard.service.ServerMonitorService=${LOG_LEVEL_MONITOR:DEBUG}
```

## Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ

### âœ… Google.com
- **Ð¡Ñ‚Ð°Ñ‚ÑƒÑ**: ONLINE
- **ÐžÑ‚Ð²ÐµÑ‚**: 301 MOVED_PERMANENTLY
- **Ð’Ñ€ÐµÐ¼Ñ**: ~27-547ms

### âœ… Httpbin.org
- **Ð¡Ñ‚Ð°Ñ‚ÑƒÑ**: ONLINE  
- **ÐžÑ‚Ð²ÐµÑ‚**: 200 OK
- **Ð’Ñ€ÐµÐ¼Ñ**: ~1000-1500ms

### âœ… Ð¡ healthcheck
- **URL**: `https://httpbin.org/status/200`
- **Ð¡Ñ‚Ð°Ñ‚ÑƒÑ**: ONLINE
- **ÐžÑ‚Ð²ÐµÑ‚**: 200 OK

## Ð›Ð¾Ð³Ð¸ Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸

ÐŸÑ€Ð¸ Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ð½Ð¾Ð¼ DEBUG ÑƒÑ€Ð¾Ð²Ð½Ðµ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð²Ñ‹ ÑƒÐ²Ð¸Ð´Ð¸Ñ‚Ðµ:

```
DEBUG - Checking HTTP endpoint: https://google.com/ for server: Google Test
DEBUG - HTTP response for https://google.com/: 301 MOVED_PERMANENTLY - SUCCESS
INFO  - âœ“ Server: Google Test | Type: Ð”Ñ€ÑƒÐ³Ð¾Ðµ | Status: online | Time: 27ms
```

## ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½Ð°

### ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

```bash
# Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ DEBUG Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð´Ð»Ñ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°
LOG_LEVEL_MONITOR=DEBUG

# Ð˜Ð»Ð¸ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½Ð°
LOG_LEVEL_MONITOR=INFO
```

### Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸

1. **Ð”Ð»Ñ Ð¿Ð¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹Ñ… ÑÐ°Ð¹Ñ‚Ð¾Ð²**: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ healthcheck endpoints Ð²Ð¼ÐµÑÑ‚Ð¾ ÐºÐ¾Ñ€Ð½ÐµÐ²Ñ‹Ñ… URL
2. **Ð”Ð»Ñ API**: Ð£ÐºÐ°Ð·Ñ‹Ð²Ð°Ð¹Ñ‚Ðµ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ‹Ðµ healthcheck Ð¿ÑƒÑ‚Ð¸
3. **ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³**: Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ðµ DEBUG Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð´Ð»Ñ Ð´Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼

## ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ

### Ð¡ healthcheck (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)
```json
{
  "name": "My API",
  "url": "https://api.example.com",
  "type": "Ð”Ñ€ÑƒÐ³Ð¾Ðµ",
  "healthcheck": "/health"
}
```

### Ð‘ÐµÐ· healthcheck (Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÑ‚Ñ‹Ñ… ÑÐ°Ð¹Ñ‚Ð¾Ð²)
```json
{
  "name": "Google",
  "url": "https://google.com/",
  "type": "Ð”Ñ€ÑƒÐ³Ð¾Ðµ"
}
```

## ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÐ¼Ñ‹Ðµ Ñ‚Ð¸Ð¿Ñ‹ Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð²

- âœ… **2xx** - Ð£ÑÐ¿ÐµÑˆÐ½Ñ‹Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ (200, 201, 202, etc.)
- âœ… **3xx** - Ð ÐµÐ´Ð¸Ñ€ÐµÐºÑ‚Ñ‹ (301, 302, 303, etc.)
- âŒ **4xx** - ÐžÑˆÐ¸Ð±ÐºÐ¸ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð° (404, 403, etc.)
- âŒ **5xx** - ÐžÑˆÐ¸Ð±ÐºÐ¸ ÑÐµÑ€Ð²ÐµÑ€Ð° (500, 502, etc.)

Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ HTTP ÑÐµÑ€Ð²ÐµÑ€Ð¾Ð² Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾! ðŸš€
