<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout}">
<head>
    <title>Dashboard</title>
</head>
<body>
    <div th:fragment="content">
        <div class="row mb-4">
            <div class="col-12">
                <h1><i class="fas fa-tachometer-alt me-2"></i>Dashboard</h1>
                <p class="text-muted">Обзор серверов и подов Kubernetes</p>
            </div>
        </div>

        <!-- Statistics Cards -->
        <div class="row g-3 mb-4 justify-content-center">
            <div class="col-md-6 col-lg-3 col-xl-3">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <i class="fas fa-server fa-2x text-primary mb-2"></i>
                        <h5 class="card-title">Всего серверов</h5>
                        <h3 class="text-primary" th:text="${totalServers}">0</h3>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3 col-xl-3">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <i class="fas fa-check-circle fa-2x text-success mb-2"></i>
                        <h5 class="card-title">Онлайн</h5>
                        <h3 class="text-success" th:text="${onlineServers}">0</h3>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3 col-xl-3">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <i class="fas fa-times-circle fa-2x text-danger mb-2"></i>
                        <h5 class="card-title">Оффлайн</h5>
                        <h3 class="text-danger" th:text="${offlineServers}">0</h3>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3 col-xl-3">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <i class="fas fa-cube fa-2x text-info mb-2"></i>
                        <h5 class="card-title">Подов</h5>
                        <h3 class="text-info" th:text="${totalPods}">0</h3>
                    </div>
                </div>
            </div>
        </div>

        <!-- Servers Section -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card shadow-sm">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-server me-2"></i>Серверы</h5>
                    </div>
                    <div class="card-body p-0">
                        <div th:if="${servers.empty}" class="text-center text-muted py-4">
                            <i class="fas fa-server fa-3x mb-3"></i>
                            <p>Нет добавленных серверов</p>
                            <button class="btn btn-primary" onclick="openSidebar()">Добавить сервер</button>
                        </div>
                        <div th:unless="${servers.empty}" class="table-responsive p-3">
                            <table class="table table-hover mb-0">
                                <thead>
                                    <tr>
                                        <th>Название</th>
                                        <th>URL</th>
                                        <th>Тип</th>
                                        <th>Статус</th>
                                        <th>Последняя проверка</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="server : ${servers}">
                                        <td th:text="${server.name}">Server Name</td>
                                        <td th:text="${server.url}">http://example.com</td>
                                        <td th:text="${server.type.displayName}">HTTP</td>
                                        <td>
                                            <span th:class="'badge bg-' + (${server.status.name()} == 'ONLINE' ? 'success' : (${server.status.name()} == 'OFFLINE' ? 'danger' : 'secondary'))"
                                                  th:text="${server.status.name()}">UNKNOWN</span>
                                        </td>
                                        <td th:text="${#temporals.format(server.lastChecked, 'dd.MM.yyyy HH:mm')}">-</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pods Section -->
        <div class="row">
            <div class="col-12">
                <div class="card shadow-sm">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-cube me-2"></i>Kubernetes Pods</h5>
                    </div>
                    <div class="card-body p-0">
                        <div th:if="${pods.empty}" class="text-center text-muted py-4">
                            <i class="fas fa-cube fa-3x mb-3"></i>
                            <p>Нет доступных подов</p>
                        </div>
                        <div th:unless="${pods.empty}" class="table-responsive p-3">
                            <table class="table table-hover mb-0">
                                <thead>
                                    <tr>
                                        <th>Название</th>
                                        <th>Версия</th>
                                        <th>Порт</th>
                                        <th>CPU</th>
                                        <th>Память</th>
                                        <th>Дата создания</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="pod : ${pods}">
                                        <td th:text="${pod.name}">pod-name</td>
                                        <td th:text="${pod.version}">v1.0.0</td>
                                        <td th:text="${pod.port}">8080</td>
                                        <td th:text="${pod.cpuRequest}">100m</td>
                                        <td th:text="${pod.memoryRequest}">128Mi</td>
                                        <td th:text="${#temporals.format(pod.creationDate, 'dd.MM.yyyy HH:mm')}">-</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
